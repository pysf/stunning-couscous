FROM golang:1.18-buster AS build

WORKDIR /app


COPY go.mod ./

RUN ls -al

RUN go mod download

COPY . .

WORKDIR /app/cmd/partnerseeder

RUN ls -al
RUN go build -o /seeder


FROM gcr.io/distroless/base-debian10

WORKDIR /

COPY --from=build /seeder /seeder

CMD ["/seeder"]